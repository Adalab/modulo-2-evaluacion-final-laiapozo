const f=document.querySelector(".js-submit-btn"),w=document.querySelector(".js-txt-search"),u=document.querySelector(".js-list-shows");let i=[];const p=s=>{u.innerHTML="";for(const t of s){const e=document.createElement("li"),n=document.createElement("img"),l=document.createElement("h3");e.appendChild(n),e.appendChild(l),u.appendChild(e),e.id=t.mal_id,e.classList.add("js-show"),t.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(n.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),n.setAttribute("alt","Portada no encontrada")):(n.setAttribute("src",t.images.jpg.image_url),n.setAttribute("alt",`Portada de ${t.title}`));const c=document.createTextNode(t.title);l.appendChild(c);const a=document.querySelectorAll(".js-show");for(const r of a)r.addEventListener("click",j)}},L=s=>{s.preventDefault();const t=w.value;fetch(`https://api.jikan.moe/v4/anime?q=${t}`).then(e=>e.json()).then(e=>{i=e.data,p(i)})};f.addEventListener("click",L);const m=document.querySelector(".js-list-favs");let o=[];const h=JSON.parse(localStorage.getItem("shows")),b=document.querySelector(".js-delete-all"),d=s=>{m.innerHTML="";for(const t of s){const e=document.createElement("li"),n=document.createElement("img"),l=document.createElement("h3"),c=document.createElement("button");e.appendChild(n),e.appendChild(l),e.appendChild(c),m.appendChild(e),e.id=t.mal_id,t.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(n.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),n.setAttribute("alt","Portada no encontrada")):(n.setAttribute("src",t.images.jpg.image_url),n.setAttribute("alt",`Portada de ${t.title}`));const a=document.createTextNode(t.title);l.appendChild(a);const r=document.createTextNode("X");c.appendChild(r),c.classList.add("js-delete-btn"),c.id=t.mal_id;const g=document.querySelectorAll(".js-delete-btn");for(const S of g)S.addEventListener("click",v)}},j=s=>{const t=parseInt(s.currentTarget.id);s.currentTarget.classList.add("favorite");const e=i.find(n=>n.mal_id===t);o.includes(e)||(o.push(e),localStorage.setItem("shows",JSON.stringify(o))),d(o)},v=s=>{const t=parseInt(s.currentTarget.id),e=o.findIndex(n=>n.mal_id===t);o.splice(e,1),localStorage.setItem("shows",JSON.stringify(o)),d(o)},C=()=>{o=[],d(o),localStorage.removeItem("shows")};if(h!==null)for(const s of h)o.push(s);d(o);b.addEventListener("click",C);const y=document.querySelector(".js-reset-btn"),A=()=>{i=[],p(i),o=[],d(o),localStorage.removeItem("shows")};y.addEventListener("click",A);
//# sourceMappingURL=main.js.map
