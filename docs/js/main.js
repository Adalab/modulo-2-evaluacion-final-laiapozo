const f=document.querySelector(".js-submit-btn"),w=document.querySelector(".js-txt-search"),u=document.querySelector(".js-list-shows");let d=[];const p=s=>{u.innerHTML="";for(const e of s){const t=document.createElement("li"),n=document.createElement("img"),l=document.createElement("h3");t.appendChild(n),t.appendChild(l),u.appendChild(t),t.id=e.mal_id,t.classList.add("js-show"),e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(n.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),n.setAttribute("alt","Portada no encontrada")):(n.setAttribute("src",e.images.jpg.image_url),n.setAttribute("alt",`Portada de ${e.title}`));const c=document.createTextNode(e.title);l.appendChild(c);const a=document.querySelectorAll(".js-show");for(const r of a)r.addEventListener("click",j)}},L=s=>{s.preventDefault();const e=w.value;fetch(`https://api.jikan.moe/v4/anime?q=${e}`).then(t=>t.json()).then(t=>{d=t.data,p(d)})};f.addEventListener("click",L);const m=document.querySelector(".js-list-favs");let o=[];const h=JSON.parse(localStorage.getItem("shows")),b=document.querySelector(".js-delete-all"),i=s=>{m.innerHTML="";for(const e of s){const t=document.createElement("li"),n=document.createElement("img"),l=document.createElement("h3"),c=document.createElement("button");t.appendChild(n),t.appendChild(l),t.appendChild(c),m.appendChild(t),t.id=e.mal_id,e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(n.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),n.setAttribute("alt","Portada no encontrada")):(n.setAttribute("src",e.images.jpg.image_url),n.setAttribute("alt",`Portada de ${e.title}`));const a=document.createTextNode(e.title);l.appendChild(a);const r=document.createTextNode("X");c.appendChild(r),c.classList.add("js-delete-btn"),c.id=e.mal_id;const g=document.querySelectorAll(".js-delete-btn");for(const S of g)S.addEventListener("click",v)}},j=s=>{const e=parseInt(s.currentTarget.id);s.currentTarget.classList.add("favorite");const t=d.find(n=>n.mal_id===e);o.push(t),localStorage.setItem("shows",JSON.stringify(o)),i(o)},v=s=>{const e=parseInt(s.currentTarget.id),t=o.findIndex(n=>n.mal_id===e);o.splice(t,1),localStorage.setItem("shows",JSON.stringify(o)),i(o)},C=()=>{o=[],i(o),localStorage.removeItem("shows")};if(h!==null)for(const s of h)o.push(s);i(o);b.addEventListener("click",C);const y=document.querySelector(".js-reset-btn"),A=()=>{d=[],p(d),o=[],i(o),localStorage.removeItem("shows")};y.addEventListener("click",A);
//# sourceMappingURL=main.js.map
