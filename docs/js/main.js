const S=document.querySelector(".js-submit-btn"),w=document.querySelector(".js-txt-search"),u=document.querySelector(".js-list-shows");let i=[];const p=n=>{u.innerHTML="";for(const e of n){const t=document.createElement("li"),o=document.createElement("img"),c=document.createElement("h3");t.appendChild(o),t.appendChild(c),u.appendChild(t),t.id=e.mal_id,t.classList.add("js-show"),e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(o.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),o.setAttribute("alt","Portada no encontrada")):(o.setAttribute("src",e.images.jpg.image_url),o.setAttribute("alt",`Portada de ${e.title}`));const l=document.createTextNode(e.title);c.appendChild(l);const d=document.querySelectorAll(".js-show");for(const r of d)r.addEventListener("click",j)}},L=n=>{n.preventDefault();const e=w.value;fetch(`https://api.jikan.moe/v4/anime?q=${e}`).then(t=>t.json()).then(t=>{i=t.data,p(i)})};S.addEventListener("click",L);const m=document.querySelector(".js-list-favs");let s=[];const h=JSON.parse(localStorage.getItem("shows")),v=document.querySelector(".js-delete-all"),a=n=>{m.innerHTML="";for(const e of n){const t=document.createElement("li"),o=document.createElement("img"),c=document.createElement("h3"),l=document.createElement("button");t.appendChild(o),t.appendChild(c),t.appendChild(l),m.appendChild(t),t.id=e.mal_id,e.images.jpg.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?(o.setAttribute("src","https://placehold.co/225x310?text=Image%20not%20found"),o.setAttribute("alt","Portada no encontrada")):(o.setAttribute("src",e.images.jpg.image_url),o.setAttribute("alt",`Portada de ${e.title}`));const d=document.createTextNode(e.title);c.appendChild(d);const r=document.createTextNode("X");l.appendChild(r),l.classList.add("js-delete-btn"),l.id=e.mal_id;const g=document.querySelectorAll(".js-delete-btn");for(const f of g)f.addEventListener("click",b)}},j=n=>{const e=parseInt(n.currentTarget.id);n.currentTarget.classList.add("favorite");const t=i.find(o=>o.mal_id===e);s.includes(t)||(s.push(t),localStorage.setItem("shows",JSON.stringify(s))),a(s)},b=n=>{const e=parseInt(n.currentTarget.id),t=document.querySelectorAll(".js-show");for(const c of t)parseInt(c.id)===e&&c.classList.remove("favorite");const o=s.findIndex(c=>c.mal_id===e);s.splice(o,1),localStorage.setItem("shows",JSON.stringify(s)),a(s)},y=()=>{const n=document.querySelectorAll(".js-show");for(const e of n)e.classList.remove("favorite");s=[],a(s),localStorage.removeItem("shows")};if(h!==null)for(const n of h)s.push(n);a(s);v.addEventListener("click",y);const A=document.querySelector(".js-reset-btn"),C=()=>{i=[],p(i),s=[],a(s),localStorage.removeItem("shows")};A.addEventListener("click",C);
//# sourceMappingURL=main.js.map
